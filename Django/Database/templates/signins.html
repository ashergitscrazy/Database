{% extends "base.html" %} {% block content %}
<h1 style = "color:white; font-size: 1000%; font-family:maginy;">Sign-In</h1>


    <p style = "color:white; font-size: 300%;">Please enter your name!</p>
    <input id="name" type="text" class="search" name="client" />

    <div class="greeting">
        <p>Hi, <span id="first-name"></span>!</p>
        <p>Which class are you taking today?</p>
    </div>

    {% for course in courses %}
    <div class="class-list">
        <button type="button" class="btn btn-default btn-lg class-btn" data-courseid="{{course.id}}">
            <h2>{{course.name}}</h2>
            <h3>{{course.instructor}}</h3>
        </button>
    </div>
    {% endfor %}

<form method="post" action="{% url 'Process Sign In' %}">
    {% csrf_token %}
    <input id="clientid" type="hidden" name="client" />
    <input id="courseid" type="hidden" name="course" />
    <button type="submit" class="btn btn-primary btn-lg sign-in-btn">
        Sign Me In!
    </button>
    <a class="btn btn-lg btn-link cancel-btn" href=" {% url 'Sign-ins' %}">Start Over</a>
</form>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js" integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0=" crossorigin="anonymous"></script>
<script>
    $( function () {

        let names = [
            {% for client in clients %}
             {
                "label": "{{client.first}} {{client.last}}",
                "value": { id: {{client.id}}, first: "{{client.first}}", last: "{{client.last}}" }
             }, {% endfor %}
        ];

        $( ".search" ).autocomplete({
            source: names,
            select: function ( event, ui ) {
                event.preventDefault();
                $( '.search' ).val( ui.item.label );
                $( '#first-name' ).html( ui.item.value.first );
                $( '.class-list, .greeting' ).addClass( 'active' );
                $( '#clientid' ).val( ui.item.value.id );
            },
            focus: function ( event, ui ) {
                event.preventDefault();
                $( '.search' ).val( ui.item.label );
            }
        });

        $( ".class-btn" ).on( 'click', function () {

            $( '.class-btn.selected' ).removeClass( 'selected' );
            $( this ).addClass( 'selected' );

            $( '.sign-in-btn, .cancel-btn' ).addClass( 'active' );
            $( '#courseid' ).val( $( this ).data( 'courseid' ) );
        });
    });
</script>

{% endblock %}
